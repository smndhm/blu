<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Demo @dume/webcomp-utils (CDN)</title>
    <script src="https://cdn.jsdelivr.net/npm/@dume/webcomp-utils@0.0.1/"></script>
  </head>

  <body>
    <h1>Demo @dume/webcomp-utils (CDN)</h1>
    <div id="classic-dom">
      <input id="main-input" type="text" value="DOM classique" />
    </div>
    <my-comp></my-comp>
    <div id="result"></div>
    <script>
      // Web Component avec shadow DOM
      class MyComp extends HTMLElement {
        constructor() {
          super();
          const shadow = this.attachShadow({ mode: 'open' });
          const input = document.createElement('input');
          input.id = 'shadow-input';
          input.value = 'Shadow DOM';
          shadow.appendChild(input);
        }
      }
      if (!customElements.get('my-comp')) {
        customElements.define('my-comp', MyComp);
      }

      window.addEventListener('DOMContentLoaded', () => {
        const result = document.getElementById('result');
        // Utilisation des fonctions globales
        const customEls = findCustomElements(document);
        const allInputs = deepQuerySelectorAll('input');
        const firstInput = deepQuerySelector('input');

        result.innerHTML = `
        <b>findCustomElements :</b> ${customEls.map(e => `<code>${e.tagName.toLowerCase()}</code>`).join(' | ')}<br><br>
        <b>deepQuerySelectorAll('input') :</b> ${allInputs.map(i => `<code>${i.id} (${i instanceof HTMLInputElement ? i.value : ''})</code>`).join(' | ')}<br><br>
        <b>deepQuerySelector('input') :</b> <code>${firstInput?.id} ${firstInput instanceof HTMLInputElement ? `(${firstInput.value})` : ''}</code>
      `;
        console.log('findCustomElements', customEls);
        console.log('deepQuerySelectorAll', allInputs);
        console.log('deepQuerySelector', firstInput);
      });
    </script>
  </body>
</html>
